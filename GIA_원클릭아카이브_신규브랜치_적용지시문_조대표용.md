# GIA 원클릭 아카이브 시스템 신규 브랜치 적용 지시문

**📋 대상:** 조대표 → 개발자(서대리 등)  
**🎯 목적:** 새로운 브랜치에서 원클릭 아카이브 시스템 구축  
**⏱️ 소요시간:** 약 10-15분  

---

## 🗣️ **조대표 지시문 (복사해서 사용)**

```
서대리, 이번 브랜치에서 개발이 완료되었으니 코드 아카이빙을 자동화해야 합니다.

MVP1.0 브랜치에서 구축한 '원클릭 아카이브 시스템'을 
현재 브랜치에 적용해 주세요.

아래 단계대로 진행하시면 됩니다:

1단계: MVP1.0 브랜치에서 아카이브 시스템 파일들 복사
2단계: 현재 브랜치 환경에 맞게 설정 조정  
3단계: 웹훅 서버 실행 및 테스트
4단계: 노션 버튼 생성 및 연동
5단계: 최종 동작 확인

완료되면 노션에서 버튼 하나만 클릭해도 
전체 코드가 자동으로 아카이빙되도록 해주세요.

질문 있으면 언제든 말씀해 주세요.
```

---

## 📋 **개발자 실행 가이드**

### **1단계: 필수 파일 복사** (5분)
```bash
# MVP1.0 브랜치에서 다음 파일들을 현재 브랜치로 복사
git checkout MVP1.0
cp webhook_archive_server.py ../temp/
cp notion_button_guide.md ../temp/
cp webhook_test.html ../temp/
cp test_webhook_direct.py ../temp/
cp get_server_token.py ../temp/
cp GIA_원클릭아카이브시스템_구축경과_및_재활용가이드_20250713.md ../temp/

# 현재 브랜치로 돌아와서 파일들 이동
git checkout [현재브랜치명]
cp ../temp/* ./
```

### **2단계: 환경 설정** (3분)
```bash
# 필요한 패키지 설치
pip install fastapi uvicorn requests python-dotenv

# 환경변수 파일 확인 (.env)
# NOTION_API_KEY=your_notion_api_key
# NOTION_ARCHIVE_DB_ID=your_archive_database_id
```

### **3단계: 웹훅 서버 실행** (2분)
```bash
# 서버 실행
python webhook_archive_server.py

# 터미널에 출력되는 정보 확인:
# - 웹훅 토큰 (gia-archive-webhook-token-2025-xxxxxxxx)
# - 현재 브랜치명
# - 접속 URL들
```

### **4단계: 노션 버튼 생성** (3분)
1. **노션 GIA 코드 아카이브 DB** 접속
2. **새 페이지 생성** 또는 **기존 페이지 편집**
3. **버튼 추가:**
   - 버튼 타입: "Open page"
   - 버튼 텍스트: "🚀 [브랜치명] 코드 아카이브"
   - URL: `http://localhost:8000/archive_trigger?token=[웹훅토큰]`

### **5단계: 최종 테스트** (2분)
```bash
# 테스트 실행
python test_webhook_direct.py

# 또는 브라우저에서
# http://localhost:8000/test?token=[웹훅토큰]
```

---

## 🎯 **성공 기준**

### ✅ **완료 체크리스트**
- [ ] 웹훅 서버가 정상 실행됨 (포트 8000)
- [ ] 현재 브랜치명이 올바르게 감지됨
- [ ] 토큰 인증이 정상 작동함
- [ ] 노션 버튼이 생성됨
- [ ] 버튼 클릭 시 아카이브가 실행됨
- [ ] 노션 DB에 상태가 실시간 업데이트됨

### 🔍 **최종 확인 방법**
1. **노션에서 버튼 클릭**
2. **터미널에서 실행 로그 확인**
3. **노션 아카이브 DB에 새 레코드 생성 확인**
4. **아카이브 상태가 "완료"로 업데이트 확인**

---

## 🚨 **문제 해결**

### **자주 발생하는 문제**
```bash
# 포트 충돌 오류 (Error 10048)
netstat -ano | findstr :8000
taskkill /PID [프로세스ID] /F

# 토큰 인증 실패 (401 Unauthorized)
python get_server_token.py  # 현재 토큰 확인

# 노션 API 연결 실패
.env 파일의 NOTION_API_KEY 및 DB_ID 확인
```

### **에러 발생 시 연락처**
- **즉시 보고:** 나실장
- **기술 지원:** MVP1.0 브랜치 참조 문서 확인

---

## 📞 **완료 보고 양식**

```
조대표님,

[브랜치명] 원클릭 아카이브 시스템 구축 완료되었습니다.

✅ 웹훅 서버: 정상 실행 (포트 8000)
✅ 브랜치 인식: [브랜치명] 확인
✅ 노션 버튼: 생성 완료
✅ 테스트: 정상 동작 확인

이제 노션에서 "[브랜치명] 코드 아카이브" 버튼을 
클릭하시면 자동으로 전체 코드가 아카이빙됩니다.

서대리 드림
```

---

## 💡 **추가 팁**

### **효율적인 사용법**
1. **개발 완료 시점마다** 버튼 클릭으로 즉시 아카이빙
2. **주요 기능 추가 후** 중간 백업용으로 활용
3. **브랜치 병합 전** 최종 아카이빙 필수

### **확장 가능 기능**
- 여러 브랜치 동시 아카이빙
- 스케줄링 자동 아카이빙
- 선택적 파일 아카이빙

---

**📌 이 지시문을 즐겨찾기 해두시고, 새로운 브랜치마다 재사용하세요!** 